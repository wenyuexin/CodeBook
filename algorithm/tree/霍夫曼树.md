# 霍夫曼树

## 1 霍夫曼编码（Huffman Coding）

霍夫曼编码是一种可变字长编码（variable-length coding，VLC），依据字符出现概率来构造不同的编码。但是变长编码意味着需要使用空格或其他特殊字符将不同字符之间的编码结果分隔开。

**前缀码**：所有字符编码都不会成为其他字符编码的前缀，有此性质的编码规则就叫前缀码。前缀码不需要分隔符。

便是前缀码的一种简单方式就是使用树。寻找最优前缀码的通用方法就是霍夫曼编码。

<br>

# 2 霍夫曼编码

使用前缀码进行数据压缩需要经过5个主要步骤：

* 构造一颗编码单次查找树
* 将该树以字节流的形式写入输出以供展开时使用
* 使用该树将字节流编码为比特流

在展开时需要：

* 读取单次查找树（保存在比特流的开头）
* 使用该树将比特流解码

### 单次查找树

单次查找树由字符串键中的所有字符构造而成，允许使用被查找键中的字符进行查找。

Trie树是一种树形结构，是一种哈希树的变种。典型应用是用于统计，排序和保存大量的字符串（但不仅限于字符串），所以经常被搜索引擎系统用于文本词频统计。它的优点是：利用字符串的公共前缀来减少查询时间，最大限度地减少无谓的字符串比较，查询效率比哈希树高。

![img](https://img-blog.csdn.net/20180711112451229?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2ZvcmV2ZXJfZHJlYW1z/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

上图就是由单词at，bee，ben，bt，q组成的Trie树

**Trie树的三个性质：**

* 根节点不包含字符，除根节点外每一个节点都只包含一个字符
* 从根节点到某一节点，路径上经过的字符连接起来，为该节点对应的字符串
* 每个节点的所有子节点包含的字符都不相同

### 霍夫曼树

假设有一串字符，并根据频率得到权重值数组W，那么可以按以下步骤执行：

* 1）根据给定的n个权值`{ W1, W2, ... , Wn }`构成n棵二叉树的集合`F={ T1, T2, ... ,Tn }`，其中每棵二叉树`Ti`中只有一个带权为`Wi`根结点，其左右子树均为空。
* 2）在F中选取两棵根结点的权值最小的树作为左右子树构造一棵新的二叉树， 且置新的二叉树的根结点的权值为其左右子树上根结点的权值之和。
* 3）在F中删除这两棵树，同时将新得到的二叉树加入F中。
* 4）重复2和3步骤，直到F只含一棵树为止。这棵树便是赫夫曼树。

<br>

**路径和路径长度**

在一棵树中，从一个结点往下可以达到的孩子或孙子结点之间的通路，称为路径。通路中分支的数目称为路径长度。若规定根结点的层数为1，则从根结点到第L层结点的路径长度为L-1。

**结点的权及带权路径长度**

若将树中结点赋给一个有着某种含义的数值，则这个数值称为该结点的权。结点的带权路径长度为：从根结点到该结点之间的路径长度与该结点的权的乘积。

**树的带权路径长度**

树的带权路径长度规定为所有叶子结点的带权路径长度之和，记为WPL（Weighted Path Length of Tree）


<br>

---

**参考资料**

1. 《算法（第4版）》Robert Sedgewick，人民邮电出版社，第5.5节
2. [霍夫曼树（最优二叉树）简介](https://blog.csdn.net/feynman1999/article/details/71173661)
3. [学习笔记--霍夫曼树与霍夫曼编码解码](https://blog.csdn.net/ZP_icenow/article/details/81041215)
4. [Trie树（字典树，单词查找树）](https://blog.csdn.net/forever_dreams/article/details/81009580)