# 红黑树

红黑二叉查找树的基本思想是，用标准的二叉查找树（完全由2节点构成）和一些额外的信息（替换3节点）来表示2-3查找树。

将树中的链接分为两种：红链接将两个2节点链接起来构成一个3节点，黑链接则是23树中的普通链接。确切的说，是将3节点表示为左斜的红色链接。这样做的好处是无需修改，可以直接使用普通二叉树的查找方法。可以说红黑树是一种特殊的23树。

**等价定义**

红黑树是含有红黑链接并满足下列条件的二叉查找树：

* 红链接均为左链接
* 没有任何一个节点同时和两个红链接相连
* 树是完美黑色平衡的，即任意空链接到根节点的路径上的黑链接数量相同。

**颜色表示**

每个节点都有一条指向自身的链接，因此可以将颜色信息保存在节点中。如果指向节点的是红链接则为红色，否则为黑色，并约定空链接为黑色。从这个角度看，也可以认为颜色是节点的属性，而节点分为红节点和黑节点。

### 基本操作

**旋转**

红色树规定红链接均为左链接，但是在执行某些操作后有可能出现红色的右链接，因此需要通过**左旋**将红色的右链接旋转为左链接。

**颜色转换**

如果节点的左右子节点的颜色都是红色，那么需要将这两个子节点的颜色变为黑色，再将该节点的颜色变为红色。因此，红链接在树中是可以向上传递的。

根节点总是黑色的，如果根节点的颜色变为红色，需要将树的高度加1，并将根节点的颜色设为黑色。

**查找和插入**

红黑树的查找普通的二叉查找树类似，插入与23树类似，需要注意的是在插入操作上，红黑树需要维护的是颜色信息。

**删除**

这个比较复杂，暂时略过

<br>

### 红黑树的性质

一颗大小为N的红黑树的高度不会超过`2lgN`。

一颗大小为N的红黑树中，根节点到任意节点的平均路径长度为`~lgN`。



<br>

------

**参考资料**

1. 《算法（第4版）》 Robert Sedgewick, Kevin Wayne，人民邮电出版社，第3章